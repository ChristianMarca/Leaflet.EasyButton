<!DOCTYPE html>
<html>
  <head>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <meta charset=utf-8 />
    <title>Leaflet.EasyButton "testing"</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.css" />
    <link rel="stylesheet" href="src/easy-button.css" />
    <script src="http://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.js"></script>
    <script src="src/easy-button.js"></script>
    <style>
      html, body{
        width: 100%;
      }
      #map{
        width: 800px;
        height: 500px;
        margin: auto;
      }
    </style>
  </head>

  <body>
    <h1 id="target"> Leaflet.EasyButton "testing" </h1>
    <div id='map' class='img-responsive'></div>
  </body>
  <foot>
<script>
var map = L.map('map', {}).setView([37.8, -96], 4);
L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

L.easyButton('fa-circle', function(){
  alert('you clicked the circle')
}, 'test me').addTo(map);
var one = L.easyButton('fa-circle', function(){alert('you clicked the circle')})
one.addTo(map);

var toggle = L.easyButton({
  id: 'switch',
  states: [{
    stateName: 'check',
    onEnter: function() {},
    title: 'just a check',
    icon: 'fa-check'
  }, {
    stateName: 'spinningX',
    onEnter: function() {},
    title: 'spinning x',
    icon: 'fa-times fa-spin'
  }]
});
toggle.addTo(map);


var three = L.easyButton({
              id: 'imgLoader',
              states:[
                {
                  stateName: 'unloaded',
                  title: 'load image',
                  onClick: function(){
                    three.state("FORWARD");
                  },
                  icon: 'fa-picture-o'
                }, {
                  stateName: 'loading',
                  onEnter: function(){
                    // TODO: Should be using something more practical `loacation`
                    var img = document.createElement('img');
                    img.addEventListener('load', function(){
                      three.state('loaded');
                      document.body.appendChild(img);
                    })
                    img.setAttribute('width','500');
                    img.setAttribute('height','500');
                    img.setAttribute('src','http://www.race.u-tokyo.ac.jp/~uchida/blogdata/dataset1_community_large.png');
                  },
                  title: 'loading',
                  icon: 'fa-spinner fa-spin'
                }, {
                  stateName: 'loaded',
                  onEnter: function(){
                    three.disable();
                  },
                  title: 'loaded',
                  icon: 'fa-check'
                }
              ]
            })
three.addTo(map);

var four = L.easyButton({
             id: 'simmmmmmpl',
             type: 'animate',
             auto: 'CYCLE',
             states:[
               {
                 stateName: 'unloaded',
                 onEnter: function(){
                   console.log('that was a pic');
                 },
                 title: 'load taxi',
                 icon: 'fa-picture-o'
               },
               {
                 stateName: 'ship',
                 onEnter: function(){
                   console.log('that ship');
                 },
                 title: 'look at gears',
                 icon: 'fa-ship'
               },
               {
                 stateName: 'gears',
                 onEnter: function(){
                   console.log('those were gears');
                 },
                 title: 'load to image',
                 icon: 'fa-gears'
               },
             ]
           })

four.addTo(map);

    map.on('zoomend',function(e){
      var map = e.target,
          max = map.getMaxZoom(),
          min = map.getMinZoom(),
          current = map.getZoom();
      if( current < max ){ zoomIn.enable() }
      if( current >= max ){ zoomIn.disable() }
      if( current > min ){ zoomOut.enable() }
      if( current <= min ){ zoomOut.disable() }
    });
    var zoomBar = L.easyBar([
      L.easyButton( '<big>+</big>', function(control, map){map.setZoom(map.getZoom()+1);}),
      L.easyButton('fa-home fa-lg', function(control, map){})
      L.easyButton('<big>-</big>', function(control, map){map.setZoom(map.getZoom()-1);}),
    ]);
    zoomBar.addTo(map);

</script>
  </foot>
</html>
